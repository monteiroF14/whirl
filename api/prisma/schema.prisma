generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               Int      @id @default(autoincrement()) @map("id")
  name             String
  role             UserRole @default(APPLICATION_USER)
  image_url        String   @default("https://img.freepik.com/free-vector/illustration-gallery-icon_53876-27002.jpg?size=626&ext=jpg&ga=GA1.1.1880011253.1699315200&semt=sph")
  own_quizzes      Quiz[]    @relation("UserOwnsQuizzes")
  followed_quizzes Quiz[]   @relation("UserFollowsQuizzes")
}

model Quiz {
  id          Int         @id @default(autoincrement())
  name        String
  url         String
  image_url   String @default("https://img.freepik.com/vetores-premium/quiz-logo_2728-12.jpg")
  created_at  DateTime @default(now())
  visibility  Visibility
  genre       QuizGenre[]
  views       Int @default(0)
  rating      Float @default(0)
  questions   Question[]   @relation("QuizOwnsQuestions") 
  created_by_id Int
  created_by  User        @relation("UserOwnsQuizzes", fields: [created_by_id], references: [id])
  followed_by User[]      @relation("UserFollowsQuizzes")
}

model Question {
  id             Int          @id @default(autoincrement())
  options        QuizOption[]
  correct_option Int
  quizId Int 
  quiz           Quiz         @relation("QuizOwnsQuestions", fields: [quizId], references: [id])
}

enum Visibility {
  public
  private
}

enum UserRole {
  APPLICATION_USER
  SUPER_ADMIN
}

enum QuizGenre {
  geography
  software
  sport
  movie
  anime
}

enum QuizOption {
  text
}
